# Default values for altiplano-diag.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

global:
  timeZoneEnv: ""
  registry: artifactory.net.nokia.com
  persistence: false
  tls:
    enabled: false
  # For IPv4 and IPv6 dual stack support at global scope.
  # ipFamilyPolicy:  SingleStack | PreferDualStack | RequireDualStack
  ipFamilyPolicy:
  # ipFamilies: ["IPv4"] | ["IPv6"] | ["IPv4","IPv6"] | ["IPv6","IPv4"]
  ipFamilies: [ ]
  # - IPv4
  # - IPv6
  #if you are deploying open source ingress controller of Nginxinc , need to change this value to nginxinc
  INGRESS_CONTROLLER_TYPE: kubernetes #valid values are kubernetes / nginxinc
#ipFamilyPolicy:  SingleStack | PreferDualStack | RequireDualStack
ipFamilyPolicy:
#ipFamilies: ["IPv4"] | ["IPv6"] | ["IPv4","IPv6"] | ["IPv6","IPv4"]
ipFamilies: []
accessRoleLabel: internal-access
replicaCount: 1

image:
  #This value will override the value set by global.registry
  #Set this to "-" if we need to just remove the value set by the global.registry
  registry: #artifactory.net.nokia.com
  repository: fnms-diag-server
  tag: nokia-1.0.8
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  ports:
    diagPort: 8080
    diagNodePort: 30082
    httpsPort: 8443
    httpsNodePort: 30083
    udpPort: 6380
    udpNodePort: 30084

tls:
  overrideGlobal: false
  enabled: false

externalCertificates:
  overrideGlobal: false
  enabled: false

persistence:
  ## If true, use a Persistent Volume Claim, If false, use emptyDir
  ## NOTE if enabled, a pvc named "diag-pvclaim" is required
  enabled: false
  ## Persistent Volume Storage Class
  ## If defined, storageClassName: <storageClass>
  ## If set to "-", storageClassName: "", which disables dynamic provisioning
  ## If undefined (the default) or set to null, no storageClassName spec is
  ##   set, choosing the default provisioner.  (gp2 on AWS, standard on
  ##   GKE, AWS & OpenStack)
  ##
  # storageClass: "-"
  ## Persistent Volume Claim annotations
  ##
  annotations:
  ## Persistent Volume Access Mode
  ##
  accessModes:
    - ReadWriteOnce
  ## Persistent Volume size
  ##
  size: 10Gi
  ##

env:
  secrets:
    USERNAME: admin
    PASSWORD: nokiafnms@123
  open:
    LOG_LEVEL: "INFO"
    FLUENTD_LOG_DIRECT_URL: "altiplano-fluentd:24224"
    #HTTPS_ENABLED: false #All other values are considered true

ingress:
  enabled: true
  annotations:
    kubernetes.io/ingress.class: nginx
    nginx.ingress.kubernetes.io/proxy-pass-suffix: $uri
    nginx.ingress.kubernetes.io/ssl-passthrough: "true"
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
    #kubernetes.io/tls-acme: "true"
  #path: /altiplano-diag
  #hosts:
  #- "*"
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local
nginxIncIngress:
  annotations:
    kubernetes.io/ingress.class: nginx
    nginx.org/mergeable-ingress-type: minion
securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  runAsGroup: 1000
  fsGroup: 1000

resources: {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #  cpu: 100m
  #  memory: 128Mi
  # requests:
  #  cpu: 100m
  #  memory: 128Mi

nodeSelector: {}

tolerations: []

affinity: {}

cbur:
  enabled: true
  apiVersion: "cbur.csf.nokia.com/v1"
  #the maximum copy you want to saved.
  maxiCopy: 5
  #Modes supported now: "local","NETBKUP","AVAMAR","CEPHS3","AWSS3", case insensitive
  backendMode: local
  #It is used for scheduled backup task
  cronSpec: "*/2 * * * *"
  #Set below parameters to true for auto enabling cron job
  autoEnableCron: true
  #Set below parameter to true in case you want cronjob to be automatically deleted/updated based on autoEnableCron or cronJob parameters
  autoUpdateCron: true
  ## should backups be encrypted?
  dataEncryption: false
  persistence:
    cburtmp:
      ## If true, use a Persistent Volume Claim, If false, use emptyDir
      ## NOTE if enabled, a pvc named "diag-cburtmp-pvclaim" is required
      ##
      enabled: true
      ## Persistent Volume Storage Class
      ## If defined, storageClassName: <storageClass>
      ## If set to "-", storageClassName: "", which disables dynamic provisioning
      ## If undefined (the default) or set to null, no storageClassName spec is
      ##   set, choosing the default provisioner.  (gp2 on AWS, standard on
      ##   GKE, AWS & OpenStack)
      ##
      # storageClass: "-"
      ## Persistent Volume Claim annotations
      ##
      annotations:
      ## Persistent Volume Access Mode
      ##
      accessModes:
      - ReadWriteOnce
      ## Persistent Volume size
      ##
      size: 20Gi
      ##
      dir: /tmp
  cbura:
    imageRepo: cbur/cbura
    imageTag: 1.0.3-5650
    imagePullPolicy: IfNotPresent
    resources:
      limits:
        cpu: 100m
        memory: 128Mi
      requests:
        cpu: 100m
        memory: 128Mi
