<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<configuration>
   {{- if .Values.global.namenodeHAEnabled }}
    <property>
        <name>fs.defaultFS</name>
        <value>hdfs://altiplano-hdfs</value>
    </property>
    {{- if (.Values.global.zookeeperquorum) }}
    <property>
        <name>ha.zookeeper.quorum</name>
        <value>{{ .Values.global.zookeeperquorum }}</value>
    </property>
    {{- else }}
    <property>
        <name>ha.zookeeper.quorum</name>
        <value>{{ template "zk-quorum" . }}:{{ .Values.zookeeperquorumPort }}</value>
    </property>
    {{- end }}
    {{- else }}
    <property>
        <name>fs.defaultFS</name>
        <value>hdfs://{{ include "hdfs.fullname" . }}-namenode:{{ .Values.nameNode.port }}</value>
    </property>
    {{- end }}

    <property><name>hadoop.proxyuser.root.hosts</name>
            <value>*</value>
    </property>
    <property>
        <name>hadoop.proxyuser.root.groups</name>
        <value>*</value>
    </property>
    {{- range $key, $value := index .Values.conf "coreSite" }}

    <property><name>{{ $key }}</name><value>{{ $value }}</value></property>
    {{- end }}
</configuration>