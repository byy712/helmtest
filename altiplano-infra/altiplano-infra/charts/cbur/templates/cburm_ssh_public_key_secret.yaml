{{- $secret := lookup "v1" "Secret" .Release.Namespace "cburm-ssh-public-key" -}}
apiVersion: v1
kind: Secret
metadata:
  name: cburm-ssh-public-key
  labels:
    {{- include "cbur.proxy.commonLabels" (tuple .) | indent 4 }}
    {{- include "cbur.customLabels" (tuple .Values.global.labels) | indent 4 }}
  annotations:
    {{- include "cbur.customAnnotations" (tuple .Values.global.annotations) | indent 4 }}
type: Opaque
data:
{{- if $secret }}
  ssh_public_key: {{ $secret.data.ssh_public_key }}
{{- else }}
  ssh_public_key: YWRtaW4=
{{- end }}
