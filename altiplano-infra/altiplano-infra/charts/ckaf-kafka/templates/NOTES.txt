You can connect to Kafka by running a simple pod in the K8s cluster like this with a configuration like this:

  apiVersion: v1
  kind: Pod
  metadata:
    name: testclient
    namespace: kafka
  spec:
    containers:
    - name: kafka
      image: {{ .Values.global.registry }}/{{ .Values.imageRepo }}:{{ .Values.imageTag }}
      command:
        - sh
        - -c
        - "exec tail -f /dev/null"

  Once you have the testclient pod above running, you can list all kafka
  topics with:

  kubectl -n kafka exec testclient -- ./bin/kafka-topics.sh --bootstrap-server kf-<release>-headless.<namespace>.<clusterDomain>:9092 --list

  To create a new topic:
  kubectl -n kafka exec testclient -- ./bin/kafka-topics.sh --bootstrap-server kf-<release>-headless.<namespace>.<clusterDomain>:9092 --topic test1 --create --partitions 1 --replication-factor 1

  To listen for messages on a topic:
  kubectl -n kafka exec -ti testclient -- ./bin/kafka-console-consumer.sh --bootstrap-server --bootstrap-server kf-<release>-headless.<namespace>.<clusterDomain>:9092 --topic test1 --from-beginning

  To stop the listener session above press: Ctrl+C

  To start an interactive message producer session:
  kubectl -n kafka exec -ti testclient -- ./bin/kafka-console-producer.sh --bootstrap-server --bootstrap-server kf-<release>-headless.<namespace>.<clusterDomain>:9092 --topic test1

  To create a message in the above session, simply type the message and press "enter"
  To end the producer session try: Ctrl+C

  Where <release> is the name of your helm release, <namespace> is the namespace where the chart is installed and <clusterDomain> is cluster domain as per the cluster configuration.
