{{- if not .Values.keycloak.secret }}
{{- if ne .Values.keycloak.cert ""  }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ template "cpro-grafana.keycloakSecretName" . }}
  labels:
    {{- include "cpro-grafana.app.labels-v3" . | nindent 4 }}
    {{- include "cpro-grafana.labelsOrAnnotations" (tuple .Values.global.labels) | indent 4}}
  annotations:
    {{- include "cpro-grafana.labelsOrAnnotations" (tuple .Values.global.annotations) | indent 4}}
type: Opaque
data:
  keycloak.crt: {{ .Values.keycloak.cert }}
{{- end }}
{{- end }}
