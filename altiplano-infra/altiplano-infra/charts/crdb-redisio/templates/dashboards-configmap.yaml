{{- include "crdb-redisio.init" . -}}
{{- if and (.Values.server.dashboard) (.Values.server.dashboard.enabled) }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "csf-common-lib.v3.resourceName" (tuple . "configmap" "dashboards") }}
  labels:
    {{- include "crdb-redisio.labels" (tuple . "server" "metrics" "dashboard" "configmap") | nindent 4 }}
    {{ toYaml .Values.server.dashboard.label | nindent 4}}
  annotations:
    {{- include "crdb-redisio.annotations" (tuple . "metrics" "dashboard" "configmap") | nindent 4 }}
data:
  {{- (.Files.Glob "dashboards/*").AsConfig | nindent 2 }}
{{- end }}
