--- cmdb-9.2.1/cmdb-original/templates/tls-maxctrl-secret.yaml	2024-04-25 05:27:41.000000000 +0530
+++ /home/chautruo/nokia/helm-dev/altiplano-infra/charts/cmdb/templates/tls-maxctrl-secret.yaml	2024-05-07 14:03:59.014932000 +0530
@@ -1,60 +0,0 @@
-{{- include "cmdb.init" . -}}
-{{- if and (eq (include "cmdb.has_maxscale" .) "true") (eq (include "cmdb.tls_enabled" (tuple . "maxscale")) "true") (eq (include "cmdb.maxscale_use_cmgr" .) "true") (eq (default "none" .Values.maxscale.tls.secretRef.name) "none") }}
-{{- $service_value := .Values.services.maxscale -}}
-{{- $service_name := $service_value.name | default (printf "%s-maxscale" (include "cmdb.fullname" .)) -}}
-{{- $_cmgr := .Values.maxscale.certificate -}}
----
-apiVersion: {{ default "cert-manager.io/v1" .Values.certManager.apiVersion }}
-kind: Certificate
-metadata:
-  name: {{ template "cmdb.fullname" . }}-maxctrl-cert
-  namespace: {{ .Release.Namespace }}
-  labels:
-    {{- include "cmdb-maxscale.labels" (tuple . "certificate") | nindent 4 }}
-  annotations:
-    {{- include "cmdb-maxscale.annotations" (tuple . "certificate") | nindent 4 }}
-spec:
-  secretName: {{ template "cmdb.fullname" . }}-maxctrl-cert
-  issuerRef:
-    name: {{ default "ncms-ca-issuer"   $_cmgr.issuerRef.name }}
-    kind: {{ default "ClusterIssuer"    $_cmgr.issuerRef.kind }}
-    group: {{ default "cert-manager.io" $_cmgr.issuerRef.group }}
-  duration: {{ default "8760h"   $_cmgr.duration }}
-  renewBefore: {{ default "360h" $_cmgr.renewBefore }}
-  commonName: {{ default (include "cmdb-maxscale.db.svc" .) $_cmgr.commonName }}
-  usages:
-    - server auth
-  dnsNames:
-  {{- if $_cmgr.dnsNames }}
-    {{- range $item := $_cmgr.dnsNames }}
-    - {{ $item }}
-    {{- end }}
-  {{- else }}
-    - {{ include "cmdb-maxscale.db.svc" . }}
-    - localhost
-  {{- end }}
-  ipAddresses:
-  {{- if $_cmgr.ipAddresses }}
-    {{- range $item := $_cmgr.ipAddresses }}
-    - {{ $item }}
-    {{- end }}
-  {{- else }}
-    - "127.0.0.1"
-    - "::1"
-  {{- end }}
-  {{- if $_cmgr.uris }}
-  uris:
-    {{- range $item := $_cmgr.uris }}
-    - {{ $item }}
-    {{- end }}
-  {{- end }}
-  privateKey:
-    {{- if hasKey $_cmgr.privateKey "algorithm" }}
-    algorithm: {{ $_cmgr.privateKey.algorithm }}
-    {{- end }}
-    encoding: {{ default "PKCS1"   $_cmgr.privateKey.encoding }}
-    {{- if hasKey $_cmgr.privateKey "size" }}
-    size: {{ int $_cmgr.privateKey.size }}
-    {{- end }}
-    rotationPolicy: {{ default "Never"   $_cmgr.privateKey.rotationPolicy }}
-{{- end }}
